<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Edit Patient - Clinic ERP</title>
  <link rel="stylesheet" href="/stylesheet/styles.css?v=2">
</head>
<body>
  <div class="container">
    <aside class="sidebar">
      <h2>ðŸ©º Clinic ERP</h2>
      <nav>
        <a href="/index">Dashboard</a>
        <a href="/patients" class="active">Patients</a>
        <a href="/appointments">Appointments</a>
        <a href="/billing">Billing</a>
        <a href="/reports">Reports</a>
        <a href="/doctor">Doctors</a>
        <a href="/settings">Settings</a>
      </nav>
    </aside>

    <main class="main">
      <header class="topbar">
        <h1>Edit Patient</h1>
      </header>

      <section class="content">
        <!-- âœ… Action URL me patient._id pass ho raha hai -->
        <form class="form" action="/patients/edit/<%= patient._id %>" method="post">
          
          <label>Full Name</label>
          <input type="text" name="name" value="<%= patient.name %>" required />

          <label>Phone Number</label>
          <input type="tel" name="contact" value="<%= patient.contact %>" required />

          <label>Gender</label>
          <select name="gender" required>
            <option value="Male" <%= patient.gender === "Male" ? "selected" : "" %>>Male</option>
            <option value="Female" <%= patient.gender === "Female" ? "selected" : "" %>>Female</option>
            <option value="Other" <%= patient.gender === "Other" ? "selected" : "" %>>Other</option>
          </select>

          <label>Date of Birth</label>
          <input type="date" name="dob" value="<%= patient.dob ? patient.dob.toISOString().split('T')[0] : '' %>" />

          <label>Address</label>
          <input type="text" name="address" value="<%= patient.address %>" />

          <label>Assigned Doctor</label>
          <input type="text" name="doctor" value="<%= patient.doctor %>" />

          <label>Status</label>
          <select name="status">
            <option value="Active" <%= patient.status === "Active" ? "selected" : "" %>>Active</option>
            <option value="Inactive" <%= patient.status === "Inactive" ? "selected" : "" %>>Inactive</option>
          </select>

          <label>Medical History</label>
          <textarea name="history" rows="3"><%= patient.history %></textarea>

          <button type="submit" class="btn">âœ… Update Patient</button>
        </form>
      </section>
    </main>
  </div>
</body>
</html>
