<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Edit Appointment - Clinic ERP</title>
  <link rel="stylesheet" href="/stylesheet/styles.css?v=3">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f4f9f9;
    }

    .container {
      display: flex;
      min-height: 100vh;
    }

    /* Sidebar */
    .sidebar {
      width: 220px;
      background: linear-gradient(180deg, #0077b6, #009688);
      color: #fff;
      padding: 20px;
    }
    .sidebar h2 {
      margin-bottom: 20px;
    }
    .sidebar nav a {
      display: block;
      padding: 10px;
      margin: 6px 0;
      text-decoration: none;
      color: #fff;
      border-radius: 6px;
      transition: background 0.3s;
    }
    .sidebar nav a:hover, 
    .sidebar nav a.active {
      background: rgba(255, 255, 255, 0.2);
    }

    /* Main */
    .main {
      flex: 1;
      padding: 20px;
    }

    .topbar {
      background: #0077b6;
      color: #fff;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
    }

    .form-card {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      max-width: 600px;
    }

    .form-card h1 {
      margin-bottom: 20px;
      color: #0077b6;
    }

    label {
      display: block;
      margin-top: 12px;
      font-weight: bold;
      color: #333;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    button {
      margin-top: 20px;
      background: #009688;
      color: #fff;
      padding: 12px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
    }

    button:hover {
      background: #00796b;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <h2>ðŸ©º Clinic ERP</h2>
      <nav>
        <a href="/index">Dashboard</a>
        <a href="/patients">Patients</a>
        <a href="/appointments" class="active">Appointments</a>
        <a href="/billing">Billing</a>
        <a href="/reports">Reports</a>
        <a href="/doctor">Doctors</a>
        <a href="/settings">Settings</a>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main">
      <header class="topbar">
        <h1>Edit Appointment</h1>
      </header>

      <section class="content">
        <div class="form-card">
          <form action="/appointments/edit/<%= appointment._id %>" method="POST">
            
            <label>Patient:</label>
            <input type="text" name="patient" value="<%= appointment.patient %>" required>

            <!-- âœ… DOB Field -->
            <label>Date of Birth:</label>
            <input type="date" name="dob" value="<%= appointment.dob ? appointment.dob.toISOString().split('T')[0] : '' %>" required>

            <label>Doctor:</label>
            <input type="text" name="doctor" value="<%= appointment.doctor %>" required>

            <label>Date:</label>
            <input type="date" name="date" value="<%= appointment.date.toISOString().split('T')[0] %>" required>

            <label>Time:</label>
            <input type="time" name="time" value="<%= appointment.time %>" required>

            <label>Reason:</label>
            <input type="text" name="reason" value="<%= appointment.reason %>">

            <label>Address:</label>
            <input type="text" name="address" value="<%= appointment.address %>" required>

            <label>Phone:</label>
            <input type="text" name="phone" value="<%= appointment.phone %>" required>

            <label>Status:</label>
            <select name="status">
              <option value="scheduled" <%= appointment.status === 'scheduled' ? 'selected' : '' %>>Scheduled</option>
              <option value="completed" <%= appointment.status === 'completed' ? 'selected' : '' %>>Completed</option>
              <option value="cancelled" <%= appointment.status === 'cancelled' ? 'selected' : '' %>>Cancelled</option>
            </select>

            <button type="submit">Update Appointment</button>
          </form>
        </div>
      </section>
    </main>
  </div>
</body>
</html>
